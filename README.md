## Postman-коллекция для проверки API

Файл `diploma.postman_collection.json` содержит postman-коллекцию - набор заранее подготовленных запросов для проверки работы API.

## Подготовка Django-проекта к запуску коллекции:
1. Проверьте, что виртуальное окружение развёрнуто и активировано, зависимости проекта установлены.
2. Для локальной проверки API в настройках `settings.py` подключите в качестве базы данных Sqlit3 либо настройте локальную версию PostgreSQL, а также включите режим дебага.
3. Выполните миграции и создайте в базе данных как минимум 2 ингредиента и 3 тега.
4. Запустите тестовый сервер.

## Загрузка коллекции в Postman:

1. Запустите Postman;
2. В левом верхнем углу нажмите `File` -> `Import`;
3. Во всплывающем окне будет предложено перетащить в него файл с коллекцией либо выбрать файл через окно файлового менеджера.
Загрузите файл `diploma.postman_collection.json` в Postman.

## Запуск коллекции:

1. После выполнения предыдущих шагов, в левой части окна Postman во вкладке `Collections` появилась импортированная коллекция.
Наведите на нее, нажмите на три точки напротив названия коллекции и в выпадающем списке выберите `Run collection`. В центре экрана появится список запросов коллекции,
а в правой части экрана - меню для настройки параметров запуска;
2. В правом меню включите фунцию `Persist responses for a session` - это даст возможность посмотреть ответы API после запуска коллекции;
3. Нажмите кнопку `Run <название коллекции>`;
4. В центре экрана отобразится результат запуска коллекции и тестов. Провалившиеся тесты можно отфильтровать, перейдя во вкладку `Failed`.
Посмотрите детали выполненного запроса и полученного ответа: для этого нажмите на тест.

## Повторный запуск коллекции:
1. Перейдете в директорию `postman_collection` в корне проекта.
2. Запустите скрипт для очистки базы данных от объектов, создаваемых при выполнении запросов из коллекции: 
`bash clear_db.sh` (**должно быть активировано виртуальное окружение**).  
В результате выполнения скрипта будут удалены все пользователи, создаваемые в процессе выполнения запросов из коллекции,
и связанные с ними объекты (при условии корректной растройки параметров `on_delete` в моделях проекта).
  
В случае возникновения сбоя очистки базы данных, создайте базу данных заново и наполните ее объектами, необходимыми для корректного запуска коллекции.
